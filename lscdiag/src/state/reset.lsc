import tree from '.'
import { cleanState } from './cleanState'

reallyReplaceAppState(state) ->
  // Discard existing fixtures
  tree.fixtures.splice(0, tree.fixtures.length)
  // Reload new state
  tree.store.dispatch({type: 'RESET_APP_STATE', payload: state})

// Replace the entire app state
export replaceAppState(state) ->
  // Defer until out of React rendering cycles
  setTimeout(-> reallyReplaceAppState(state), 0)

export resetAppState() ->
  replaceAppState(cleanState)
